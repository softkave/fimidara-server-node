## Now

- [ ] Move logs to it's own service and not write directly to DB
- [ ] Use standard JWT secret for productionany cookie security issues
- [ ] Should we fold permission items under agent tokens? Meaning we'll now have a public agent token for public users. Pro is, it may make auth check faster.
- [ ] fs file provider
- [ ] move email providers to own folder
- [ ] Endpoint for deleting presigned urls
- [ ] Test files like .env work on upload and read file
- [ ] Support jwt in cookies, and look into
- [ ] Return progress when uploading file in js sdk
- [ ] resources fetched are currently not sorted by last updated
- [ ] data or resource name for endpoints, decide
- [ ] mddoc endpoint description and support markdown
- [ ] Include request in assertions and logs for better debugging
- [ ] Mark item deleted in endpoint call, and disallow further mutation and query actions on the item
- [ ] Remove workspaceId from get and update item endpoints
- [ ] remove setRequired from mddoc fieldobject fields, and use requiredField and optionalField
- [ ] Stream and start processing uploaded files immediately to avoid files using too much ram
- [ ] Revamp UI
- [ ] Image pipeline should help compress images to web formats, same for other frontend media
- [ ] Hide create workspace button on frontend if user is on waitlist
- [ ] Learn more about csrf and ssrf
- [ ] Track collaboration requests userr has not seen?
- [ ] Document all errors to surface in docs
- [ ] Handle password change required on the frontend
- [ ] Change password with current password or forgot password on the frontend
- [ ] Frontend for tags for collaborators without permissions
- [ ] All the many many TODOs littering the project
- [ ] Support providedResourceId for all resources
- [ ] In app notification
- [ ] On server start, produce dev env vars when not in production
- [ ] For tests, have a local cache of mem data that can quickly be loaded instead of fetching from db. Maybe it'll help tests run faster and use less memory. Or use Jest's global to pass same context around.
- [ ] Predefined resize pipelines
- [ ] Public access op for files
- [ ] Get version of readFile, we currently only have Post
- [ ] Mem, shard by workspace and other fields
- [ ] Accepted collaboration requests should be put in their own space
- [ ] Limit assigned permissions depth to 10
- [ ] File and folder exists endpoints
- [ ] Mem, test delete one and delete many items
- [ ] Grant permission should work on the resource level, like allowing access to grant permission for folder and children
- [ ] Mem, sync persisted and current in-memory DBs
- [ ] Add types to force you to write and update Joi schemas
- [ ] Add description/comments to mddoc endpoints and types
- [ ] Filter out agent token ID if the agent type is user
- [ ] Make sure fields we use for matching are indexed
- [ ] Capture stack trace for log functions like appAssert
- [ ] Check if we have a wrapper error and confirm that it's wrapped content is logged when logging it
- [ ] Get tags by name
- [ ] Confirm that queries that should have index hits do
- [ ] Think up a way to add context information to txns and lock timeout errors
- [ ] Write tests to confirm that memstore is faster overall than mongodb
- [ ] A memstore txn lock times out in deleteFolder test
- [ ] Refresh jwt tokens and group for collaborators not yet given permission groups
- [ ] Implement public access actions for resources and check that requesting agent has permission to perform action. Can do similar thing for collaboration request's permission groups assigned on accept.
- [ ] Ensure that streaming works on clientside when uploading that the formdata is not waiting for all data to be available b4 uploading
- [ ] Add array or singular item type to permission item mddoc definitions
- [ ] Make sure min and max is set for mddoc fields
- [ ] CORS and origin restrict non-public endpoints to just fimidara frontend
- [ ] either return shortened enums to descriptive text or find a way to add comments to them in api and sdk.
- [ ] clarify in docs, endpoints that have required body but same fields can be passed in path or query
- [ ] type and field comments from mddoc
- [ ] gen validation schemas from mddoc
- [ ] gen tests from mddoc
- [ ] Include folders, files, names and IDs in error messages?
- [ ] Memstore txn ops shouldn't wait if query or data to insert/update is empty
- [ ] Memstore should run query for multiple queries at once instead of one query per loop. This can also be used to support $or and $and
- [ ] Frontend endpoint doc should be generated for each route to reduce compute and cost. Currently, the file is loaded then rendered.
- [ ] Seek file included in readFile
- [ ] Support Blob, UIntArray in js sdk, and ensure that string support works
- [ ] Switch assert to appAssert
- [ ] Include count in paged endpoints
- [ ] Test that all delete artifacts are removed for all resources

## Later

- [ ] Mem, use traversal indexes for gt, gte, lt, lte
- [ ] Use token version when querying tokens
- [ ] Change events and audit logs
- [ ] Email and names should be shorter for regex and escape regex special chars
- [ ] Check file and folder and similar unique resources do not exist b4 creating them. Files are folders are case insensitive
- [ ] Allow provided ID for all workspace resource, and check that it doesn't exist
- [ ] Support $or and $and for queries
- [ ] Check that all tags are saved
- [ ] Ensure that all check auth calls use right actions
- [ ] In the future, implement mark deleted, shallow delete, complete delete, per resource, and allow users to select fields to mask on shallow delete
- [ ] Public deny all to remove implicit auth and external entity permissions for collaboration requests
- [ ] Monorepo using turbo repo
- [ ] Logs and retries
- [ ] when retrieving cached tokens from the session agent, check that the token contains the input JWTEndpoints
- [ ] copy and centralize all your todos in one place
- [ ] drop max file size for now and reimplement
- [ ] free flow tags and meta
- [ ] Add to public permission group description what it's for and that it cannot be deleted. Add similar information to admin permission group and that deleting it may lock the admin out of the app
- [ ] Consistent '.' at the end of descriptions and messages
- [ ] delete permission items when entity, container, or resource is deleted
- [ ] write more auth check tests, particularly for ones that shouldn't grant access
- [ ] differentiate between user and collaborator
- [ ] increase the length of nanoids
- [ ] maybe have a separate db for testing mongodataprovider and teardown after test or move away from data providers quickly
- [ ] make workspace ID not required for most APIs since it can be deduced from the tokens. Remove it all together in the JS sdk.
- [ ] should we gate who can see who's permissions
- [ ] swagger API documentation
- [ ] use tags and update the names when workspace names or user names changes
- [ ] sort data by date by default
- [ ] Use extension when file matching so that users can upload files with the same name but with different extensions and test that it works
- [ ] Job to send reminder of collaboration requests to users who haven't accepted or rejected them in a while and when they expire
- [ ] Allow collaboration requests to be resent after a certain time
- [ ] Alert recipients when request is revoked
- [ ] Split free usage thresholds
- [ ] Waitlist and size ups
- [ ] Add usage to workspace and check remaining when uploading or downloading
- [ ] Pipelines should run when the prev is done
- [ ] Move pipelines to worker threads
- [ ] Scripts should run once
- [ ] New usage thresholds very small
- [ ] Articles
